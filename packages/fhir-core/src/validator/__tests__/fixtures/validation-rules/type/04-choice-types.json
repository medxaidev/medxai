{
  "description": "Choice type validation: elements allowing multiple types, and validateChoiceType suffix checks",
  "scenarios": [
    {
      "label": "string value matches [string, Quantity] choice",
      "element": {
        "path": "Observation.value[x]",
        "id": "Observation.value[x]",
        "min": 0, "max": 1,
        "types": [{ "code": "string" }, { "code": "Quantity" }],
        "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false
      },
      "value": "positive",
      "expectedIssueCount": 0
    },
    {
      "label": "Quantity value matches [string, Quantity] choice",
      "element": {
        "path": "Observation.value[x]",
        "id": "Observation.value[x]",
        "min": 0, "max": 1,
        "types": [{ "code": "string" }, { "code": "Quantity" }],
        "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false
      },
      "value": { "value": 120, "unit": "mmHg" },
      "expectedIssueCount": 0
    },
    {
      "label": "boolean value does NOT match [string, Quantity] → TYPE_MISMATCH",
      "element": {
        "path": "Observation.value[x]",
        "id": "Observation.value[x]",
        "min": 0, "max": 1,
        "types": [{ "code": "string" }, { "code": "Quantity" }],
        "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false
      },
      "value": true,
      "expectedIssueCount": 1,
      "expectedIssues": [{ "code": "TYPE_MISMATCH" }]
    },
    {
      "label": "CodeableConcept matches [CodeableConcept, string] choice",
      "element": {
        "path": "Observation.value[x]",
        "id": "Observation.value[x]",
        "min": 0, "max": 1,
        "types": [{ "code": "CodeableConcept" }, { "code": "string" }],
        "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false
      },
      "value": { "coding": [{ "system": "http://snomed.info/sct", "code": "123" }] },
      "expectedIssueCount": 0
    },
    {
      "label": "Reference does NOT match [string, boolean] → TYPE_MISMATCH",
      "element": {
        "path": "Observation.value[x]",
        "id": "Observation.value[x]",
        "min": 0, "max": 1,
        "types": [{ "code": "string" }, { "code": "boolean" }],
        "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false
      },
      "value": { "reference": "Patient/1" },
      "expectedIssueCount": 1,
      "expectedIssues": [{ "code": "TYPE_MISMATCH" }]
    }
  ]
}
