{
  "description": "Type discriminator on value[x] — match by inferred FHIR type",
  "slicingRoot": {
    "path": "Observation.component",
    "id": "Observation.component",
    "min": 0, "max": "unbounded",
    "types": [{ "code": "BackboneElement" }],
    "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false,
    "slicing": {
      "discriminators": [{ "type": "type", "path": "value" }],
      "rules": "open",
      "ordered": false
    }
  },
  "slices": [
    {
      "path": "Observation.component",
      "id": "Observation.component:quantityValue",
      "min": 0, "max": "unbounded",
      "types": [{ "code": "Quantity" }],
      "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false,
      "sliceName": "quantityValue"
    },
    {
      "path": "Observation.component",
      "id": "Observation.component:stringValue",
      "min": 0, "max": "unbounded",
      "types": [{ "code": "string" }],
      "constraints": [], "mustSupport": false, "isModifier": false, "isSummary": false,
      "sliceName": "stringValue"
    }
  ],
  "scenarios": [
    {
      "label": "Quantity value matches quantityValue slice",
      "values": [
        { "value": { "value": 120, "unit": "mmHg", "system": "http://unitsofmeasure.org", "code": "mm[Hg]" } }
      ],
      "expectedIssueCount": 0
    },
    {
      "label": "string value matches stringValue slice",
      "values": [
        { "value": "normal" }
      ],
      "expectedIssueCount": 0
    },
    {
      "label": "both types present → valid",
      "values": [
        { "value": { "value": 120, "unit": "mmHg", "system": "http://unitsofmeasure.org", "code": "mm[Hg]" } },
        { "value": "normal" }
      ],
      "expectedIssueCount": 0
    }
  ]
}
